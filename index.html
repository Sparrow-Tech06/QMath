<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">

<title>Daily Math Quiz â€“ Mental Math Practice App</title>

<meta name="description" content="Daily Math Quiz app for students and learners. Practice mental math, improve calculation speed, and solve timed math quizzes every day.">
<meta name="keywords" content="daily math quiz, math quiz app, mental math quiz, brain trainer, timed math quiz">
<meta name="author" content="Daily Math Quiz App">

<meta itemprop="name" content="Daily Math Quiz â€“ Mental Math">
<meta itemprop="description" content="Solve daily math quizzes and improve your mental calculation speed.">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
/* ================= THEME ================= */
:root{
  --bg:#f7f8fa;
  --card:#f1f3f6;
  --card2:#ffffff;
  --text:#0f172a;
  --muted:#6b7280;
  --puzzle:#7c6cff;
  --math:#ff9f1a;
  --green:#9BFF7A;
  --border:#e5e7eb;
  --radius:18px;
  --radius-sm:14px;
  --sk-base:#e6e8eb;
  --sk-mid:#f2f3f5;
  --error:#ff4757;
}

@media (prefers-color-scheme: dark){
:root{
  --bg:#0f1115;
  --card:#171a20;
  --card2:#1d2129;
  --text:#ffffff;
  --muted:#9ca3af;
  --border:#2f3750;
  --sk-base:#1f2430;
  --sk-mid:#2a3140;
  --error:#ff6b81;
}
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  -webkit-tap-highlight-color:transparent;
}

body{
  background:var(--bg);
  color:var(--text);
  font-family:'Inter',system-ui,sans-serif;
  overflow-x:hidden;
}

a{text-decoration:none;color:inherit}
.app{max-width:680px;margin:auto}

/* ================= HEADER ================= */
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px 16px;
  background:var(--card2);
  border-bottom:1px solid var(--border);
  position:sticky;
  top:0;
  z-index:1000;
}

.header-left{
  display:flex;
  align-items:center;
  gap:12px;
}

.menu-btn{
  font-size:22px;
  opacity:.8;
  cursor:pointer;
}

.notify-btn{
  width:42px;height:42px;
  display:flex;align-items:center;justify-content:center;
  border-radius:50%;
  background:var(--card);
  border:1px solid var(--border);
}

/* ================= OFF-CANVAS SIDEBAR ================= */
.offcanvas-sidebar {
  position:fixed;
  top:0;
  left:-320px;
  width:300px;
  height:100%;
  background:var(--card2);
  border-right:1px solid var(--border);
  z-index:1100;
  transition:left 0.3s ease;
  overflow-y:auto;
  padding:20px;
}

.offcanvas-sidebar.active {
  left:0;
}

.sidebar-overlay {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.5);
  z-index:1050;
  opacity:0;
  visibility:hidden;
  transition:opacity 0.3s ease;
}

.sidebar-overlay.active {
  opacity:1;
  visibility:visible;
}

.sidebar-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:30px;
  padding-bottom:15px;
  border-bottom:1px solid var(--border);
}

.sidebar-close {
  font-size:24px;
  cursor:pointer;
  opacity:0.7;
}

.sidebar-nav {
  display:flex;
  flex-direction:column;
  gap:12px;
}

.sidebar-item {
  display:flex;
  align-items:center;
  gap:12px;
  padding:14px 16px;
  border-radius:var(--radius-sm);
  transition:background 0.2s ease;
}

.sidebar-item:hover {
  background:var(--card);
}

.sidebar-item i {
  font-size:20px;
  width:24px;
}

/* ================= SECTION ================= */
section{padding:16px}

.section-title{
  font-size:11px;
  letter-spacing:2px;
  color:var(--muted);
  margin:16px 0 10px;
}

.section-title::after{
  content:'';
  width:36px;height:2px;
  background:var(--border);
  display:block;margin-top:6px;
}

/* ================= HORIZONTAL ================= */
.h-scroll{
  display:flex;
  gap:12px;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
}
.h-scroll::-webkit-scrollbar{display:none}

/* ================= STATUS ================= */
.status-box{
  min-width:60px;height:60px;
  border-radius:50%;
  background:var(--card2);
  border:1px solid var(--border);
  display:flex;
  align-items:center;
  justify-content:center;
  scroll-snap-align:start;
  position:relative;
}

.status-box i{
  font-size:22px;
  transition:transform 0.2s ease;
}

.status-box:hover i{
  transform:scale(1.1);
}

.status-box.active {
  box-shadow:0 4px 12px rgba(0,0,0,0.1);
}

/* Status icon colors */
.status-box .bi-trophy-fill { color:#FFD700; }
.status-box .bi-clock-fill { color:#4CAF50; }
.status-box .bi-graph-up-arrow { color:#2196F3; }
.status-box .bi-star-fill { color:#FF9800; }
.status-box .bi-award-fill { color:#9C27B0; }
.status-box .bi-lightning-charge-fill { color:#FF5722; }

/* ================= CHALLENGE ================= */
.challenge-card{
  min-width:160px;
  padding:16px 22px;
  border-radius:var(--radius);
  background:var(--card2);
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-weight:700;
  border:1px solid var(--border);
  scroll-snap-align:start;
  transition:.2s ease;
}

.challenge-card:active{transform:scale(.96)}
.challenge-card.puzzle{color:var(--puzzle)}
.challenge-card.math{color:var(--math)}

.challenge-card.active{
  box-shadow:0 12px 30px rgba(0,0,0,.12);
}

/* ================= TOPIC ================= */
.topic-card{
  display:flex;
  gap:14px;
  padding:18px;
  background:var(--card2);
  border-radius:var(--radius);
  border:1px solid var(--border);
  transition:.2s ease;
  margin-bottom:16px;
  position:relative;
  overflow:hidden;
}
.topic-card:active{transform:scale(.97)}

.topic-card img{
  width:90px;
  aspect-ratio:1/1;
  padding:18px;
  border-radius:14px;
  background:var(--card);
  border:1px solid var(--border);
  transition:transform 0.3s ease;
}

.topic-card:hover img{
  transform:rotate(5deg) scale(1.05);
}

.text-mute{font-size:12px;color:var(--muted)}

/* ================= ERROR STATE ================= */
.error-container {
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:40px 20px;
  text-align:center;
  background:var(--card2);
  border-radius:var(--radius);
  border:1px solid var(--border);
  margin:16px 0;
}

.error-icon {
  font-size:48px;
  color:var(--error);
  margin-bottom:16px;
}

.error-title {
  font-size:18px;
  font-weight:600;
  margin-bottom:8px;
  color:var(--error);
}

.error-message {
  font-size:14px;
  color:var(--muted);
  margin-bottom:20px;
}

.retry-btn {
  padding:10px 24px;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-sm);
  color:var(--text);
  font-weight:500;
  cursor:pointer;
  transition:all 0.2s ease;
}

.retry-btn:hover {
  background:var(--border);
}

/* ================= SKELETON ================= */
.img-skeleton{
  background:linear-gradient(90deg,var(--sk-base) 25%,var(--sk-mid) 37%,var(--sk-base) 63%);
  background-size:200% 100%;
  animation:skeleton 1.2s infinite ease-in-out;
  border-radius:14px;
}

.topic-skeleton {
  width:90px;
  height:90px;
  border-radius:14px;
  background:linear-gradient(90deg,var(--sk-base) 25%,var(--sk-mid) 37%,var(--sk-base) 63%);
  background-size:200% 100%;
  animation:skeleton 1.2s infinite ease-in-out;
}

.text-skeleton {
  height:12px;
  border-radius:6px;
  background:linear-gradient(90deg,var(--sk-base) 25%,var(--sk-mid) 37%,var(--sk-base) 63%);
  background-size:200% 100%;
  animation:skeleton 1.2s infinite ease-in-out;
  margin-bottom:8px;
}

.text-skeleton.title {
  height:18px;
  width:70%;
  margin-bottom:12px;
}

.text-skeleton.desc {
  height:12px;
  width:90%;
}

@keyframes skeleton{
  0%{background-position:100% 0}
  100%{background-position:0 0}
}

/* ================= SHARE ================= */
.share-card{
  background:var(--card2);
  border-radius:var(--radius);
  padding:20px;
  margin:30px 16px;
  border:1px solid var(--border);
}

.actions{display:flex;gap:12px;margin-top:16px}

.invite-btn{
  flex:1;
  padding:14px;
  border-radius:var(--radius-sm);
  background:#25d366;
  color:#000;
  font-weight:700;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  cursor:pointer;
  transition:opacity 0.2s ease;
}

.invite-btn:active{
  opacity:0.8;
}

.copy-btn{
  width:56px;height:56px;
  border-radius:var(--radius-sm);
  background:var(--card);
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  border:1px solid var(--border);
  cursor:pointer;
  transition:all 0.2s ease;
}

.copy-btn:active{
  transform:scale(0.95);
}

.copy-btn.copied{
  background:var(--green);
  color:#000;
}

.copy-btn span{
  position:absolute;
  bottom:-18px;
  font-size:11px;
  color:var(--green);
  display:none;
}
.copy-btn.copied span{display:block}
</style>
</head>

<body>
<main class="app">

<!-- Off-canvas Sidebar -->
<div class="offcanvas-sidebar" id="sidebar">
  <div class="sidebar-header">
    <h4 class="fw-bold m-0">Daily Math Quiz</h4>
    <i class="bi bi-x-lg sidebar-close" onclick="closeSidebar()"></i>
  </div>
  
  <div class="sidebar-nav" id="sidebarNav">
    <!-- Sidebar items will be loaded from JSON -->
  </div>
</div>

<div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>

<header>
  <div class="header-left">
    <i class="bi bi-list menu-btn" onclick="openSidebar()"></i>
    <h1 class="fs-5 m-0">Daily Math Quiz</h1>
  </div>
  <a href="notifications/notifications.html" class="notify-btn">
    <i class="bi bi-bell"></i>
  </a>
</header>

<section>
  <div id="statusSection"></div>
</section>

<section>
  <div class="section-title">TODAY'S CHALLENGE</div>
  <div class="h-scroll" id="challengeContainer"></div>
</section>

<section id="topicContent"></section>

<section class="share-card">
  <h5 class="fw-bold">Share the Challenge</h5>
  <p class="text-mute">Play with friends & earn together</p>

  <div class="actions">
    <div class="invite-btn" onclick="shareWhatsApp()">
      <i class="bi bi-whatsapp"></i> Invite
    </div>
    <div class="copy-btn" id="copyBtn" onclick="copyLink()">
      <i class="bi bi-clipboard"></i>
      <span>Copied</span>
    </div>
  </div>
</section>

</main>

<script>
const statusSection = document.getElementById("statusSection");
const challengeContainer = document.getElementById("challengeContainer");
const topicContent = document.getElementById("topicContent");
const copyBtn = document.getElementById("copyBtn");
const sidebar = document.getElementById("sidebar");
const sidebarOverlay = document.getElementById("sidebarOverlay");
const sidebarNav = document.getElementById("sidebarNav");
let sprintData = {};

/* Sidebar Functions */
function openSidebar() {
  sidebar.classList.add('active');
  sidebarOverlay.classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closeSidebar() {
  sidebar.classList.remove('active');
  sidebarOverlay.classList.remove('active');
  document.body.style.overflow = 'auto';
}

/* Show Error Function */
function showError(container, title, message, retryFunction = null) {
  container.innerHTML = `
    <div class="error-container">
      <i class="bi bi-exclamation-triangle error-icon"></i>
      <h3 class="error-title">${title}</h3>
      <p class="error-message">${message}</p>
      ${retryFunction ? `<button class="retry-btn" onclick="${retryFunction}">Try Again</button>` : ''}
    </div>
  `;
}

/* Load Sidebar Content */
function loadSidebar() {
  sidebarNav.innerHTML = `
    <div class="sidebar-item">
      <div class="text-skeleton" style="width:100%; height:40px;"></div>
    </div>
  `;
  
  fetch('https://sparrow-tech06.github.io/QMath/data/sidebar.json')
    .then(r => {
      if (!r.ok) throw new Error('Failed to load');
      return r.json();
    })
    .then(data => {
      sidebarNav.innerHTML = data.map(item => `
        <a href="${item.link}" class="sidebar-item">
          <i class="bi ${item.icon}"></i>
          <span>${item.title}</span>
        </a>
      `).join('');
    })
    .catch(error => {
      showError(sidebarNav, 
        "Something went wrong", 
        "Unable to load navigation menu. Please check your internet connection.",
        "loadSidebar()");
    });
}

/* Initial Skeleton Loading */
statusSection.innerHTML = `
<div class="h-scroll">
${Array(6).fill(0).map(() => `<div class="status-box img-skeleton"></div>`).join('')}
</div>`;

/* Load Topics with Skeleton */
topicContent.innerHTML = `
  ${Array(2).fill(0).map(() => `
    <div class="topic-card">
      <div class="topic-skeleton"></div>
      <div class="flex-grow-1">
        <div class="text-skeleton" style="width:40%"></div>
        <div class="text-skeleton title"></div>
        <div class="text-skeleton desc"></div>
        <div class="text-skeleton desc" style="width:80%"></div>
      </div>
    </div>
  `).join('')}
`;

/* STATUS */
function loadStatus() {
  statusSection.innerHTML = `
    <div class="h-scroll">
      ${Array(6).fill(0).map(() => `<div class="status-box img-skeleton"></div>`).join('')}
    </div>
  `;
  
  fetch('https://sparrow-tech06.github.io/QMath/data/status.json')
    .then(r => {
      if (!r.ok) throw new Error('Failed to load');
      return r.json();
    })
    .then(d => {
      const row = document.createElement('div');
      row.className = 'h-scroll';
      d.forEach(s => {
        const statusBox = document.createElement('a');
        statusBox.href = s.link;
        statusBox.className = 'status-box';
        statusBox.innerHTML = `<i class="bi ${s.icon} ${s.colorClass || ''}"></i>`;
        row.appendChild(statusBox);
      });
      statusSection.innerHTML = '';
      statusSection.appendChild(row);
    })
    .catch(error => {
      showError(statusSection, 
        "Connection Issue", 
        "Unable to load status icons. Please try again later.",
        "loadStatus()");
    });
}

/* CHALLENGE */
function loadChallenges() {
  challengeContainer.innerHTML = '';
  
  // Show skeleton for challenges
  for (let i = 0; i < 2; i++) {
    const skeletonDiv = document.createElement('div');
    skeletonDiv.className = 'challenge-card';
    skeletonDiv.innerHTML = `<div style="width:100px; height:24px; border-radius:6px;" class="img-skeleton"></div>`;
    challengeContainer.appendChild(skeletonDiv);
  }
  
  fetch('https://sparrow-tech06.github.io/QMath/data/sprint.json')
    .then(r => {
      if (!r.ok) throw new Error('Failed to load');
      return r.json();
    })
    .then(data => {
      sprintData = data;
      buildChallenges();
    })
    .catch(error => {
      showError(challengeContainer, 
        "Data Unavailable", 
        "Daily challenges could not be loaded. Please check your connection.",
        "loadChallenges()");
      showError(topicContent,
        "No Topics Available",
        "Topics will appear once challenges are loaded.",
        null);
    });
}

function buildChallenges() {
  challengeContainer.innerHTML = '';
  
  if (!sprintData || Object.keys(sprintData).length === 0) {
    showError(challengeContainer, 
      "No Challenges", 
      "There are no challenges available at the moment.",
      "loadChallenges()");
    return;
  }
  
  Object.keys(sprintData).forEach((k, i) => {
    const c = sprintData[k];
    const div = document.createElement('div');
    div.className = `challenge-card ${c.color} ${i === 0 ? 'active' : ''}`;
    div.innerHTML = `${k.toUpperCase()} <i class="bi bi-play-fill"></i>`;
    div.onclick = () => {
      document.querySelectorAll('.challenge-card')
        .forEach(el => el.classList.remove('active'));
      div.classList.add('active');
      renderTopics(k);
    };
    challengeContainer.appendChild(div);
    if (i === 0) renderTopics(k);
  });
}

function renderTopics(type) {
  if (!sprintData[type] || !sprintData[type].topics) {
    showError(topicContent,
      "Topics Not Found",
      "No topics available for this challenge.",
      null);
    return;
  }
  
  // Show skeleton while loading
  topicContent.innerHTML = `
    ${Array(sprintData[type].topics.length).fill(0).map(() => `
      <div class="topic-card">
        <div class="topic-skeleton"></div>
        <div class="flex-grow-1">
          <div class="text-skeleton" style="width:40%"></div>
          <div class="text-skeleton title"></div>
          <div class="text-skeleton desc"></div>
          <div class="text-skeleton desc" style="width:80%"></div>
        </div>
      </div>
    `).join('')}
  `;
  
  // Small delay to show skeleton, then load content
  setTimeout(() => {
    topicContent.innerHTML = '';
    sprintData[type].topics.forEach(t => {
      const topicCard = document.createElement('a');
      topicCard.href = t.link;
      topicCard.className = 'topic-card';
      topicCard.innerHTML = `
        <div class="flex-grow-1">
          <small class="text-secondary">${t.label}</small>
          <h6 class="fw-bold">${t.title}</h6>
          <p class="text-mute">${t.desc}</p>
        </div>
        <img src="${t.image}" loading="lazy"
          class="img-skeleton"
          onload="this.classList.remove('img-skeleton')"
          onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTAiIGhlaWdodD0iOTAiIHZpZXdCb3g9IjAgMCA5MCA5MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjkwIiBoZWlnaHQ9IjkwIiByeD0iMTQiIGZpbGw9InVybCgjZGF0YS1yYWluYm93KSIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJkYXRhLXJhaW5ib3ciIHgxPSIwIiB5MT0iMCIgeDI9IjkwIiB5Mj0iOTAiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI2U2ZThlYiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmMmYzZjUiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K'">
      `;
      topicContent.appendChild(topicCard);
    });
  }, 300);
}

/* SHARE */
const shareText = `ðŸ”¥ Join me on Daily Math Quiz ðŸ‘‰ ${window.location.origin}`;

function shareWhatsApp() {
  window.open("https://wa.me/?text=" + encodeURIComponent(shareText));
}

function copyLink() {
  navigator.clipboard.writeText(shareText).then(() => {
    copyBtn.classList.add("copied");
    setTimeout(() => copyBtn.classList.remove("copied"), 1500);
  }).catch(() => {
    // Fallback for older browsers
    const textArea = document.createElement('textarea');
    textArea.value = shareText;
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand('copy');
    document.body.removeChild(textArea);
    copyBtn.classList.add("copied");
    setTimeout(() => copyBtn.classList.remove("copied"), 1500);
  });
}

/* Initialize App */
document.addEventListener('DOMContentLoaded', function() {
  loadSidebar();
  loadStatus();
  loadChallenges();
});
</script>
</body>
  </html>
