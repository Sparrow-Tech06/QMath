<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Game Result</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/howler@2.2.4/dist/howler.min.js"></script>

<style>
:root{
  --bg:#ffffff;
  --text:#1e1f24;
  --muted:#6c757d;
  --border:#e6e8ef;
  --primary:#4f46e5;
}
body{
  margin:0;
  min-height:100vh;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui;
}
.wrapper{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.card{
  max-width:420px;
  width:100%;
  border: none ;
  border-radius:18px;
  padding:28px;
  text-align:center;
}
.score{
  font-size:48px;
  font-weight:800;
}
 img {
   min-height: 140px; border: 2px solid #f7f8fa ;
   min-width:140px ; border-radius: 50% ;
   box-shadow:  ;
   margin: 30px auto ;
 }
  .weldone { font-size:30px ; }
</style>
</head>

<body>

<div class="wrapper">
  <div class="card">
    
    <div id="gameName" class="text-muted"></div>
    <div id="weldone" class="weldone"> Well Played </div>
    <img src="assets/picture/boywithtrophy.webp" draggable="false" loading="lazy">
    <div class="score" id="score"></div>
    <div id="percent" class="text-muted mb-4"></div>

    <button class="btn btn-primary w-100" onclick="goBack()">Back to Menu</button>
  </div>
</div>
  
<script src="https://sparrow-tech06.github.io/Figgy/coin/get-coin.js"></script>
<script>
const score = +localStorage.getItem('lastScore') || 0;
const total = +localStorage.getItem('lastTotal') || 0;
const gameName = localStorage.getItem('lastGame') || 'Game';

document.getElementById('gameName').innerText = gameName;
document.getElementById('score').innerText = `${score} / ${total}`;
document.getElementById('percent').innerText =
  total ? Math.round((score/total)*100)+'% Accuracy' : '0%';

/* ===== SOUND ===== */
if(localStorage.getItem('soundOn') === '1'){
  new Howl({ src:['assets/sound/correct.mp3'], volume:.6 }).play();
}

/* ===== ONE-TIME REWARD ===== */
(function rewardOnce(){
  const rewardKey = localStorage.getItem('rewardKey');
  if(!rewardKey) return;

  const lock = 'rewarded_' + rewardKey;
  if(localStorage.getItem(lock) === '1') return;

  if(typeof getCoin === 'function'){
    getCoin(10, gameName);
  }

  localStorage.setItem(lock,'1');
})();

function goBack(){
  window.history.back();
}

history.pushState(null,'',location.href);
window.onpopstate = ()=>history.back();
</script>

</body>
</html>

