<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>My Coins</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<style>
:root{
  --bg:#f7f8fa;
  --card:#ffffff;
  --soft:#9aa0aa;
  --accent:#ffd54f;
  --border:#e3e6ea;
  --icon:#000;
  --coin:#9b8cff;
  --sk-base:#e6e8eb;
  --sk-mid:#f2f3f5;
}

@media (prefers-color-scheme: dark){
:root{
  --bg:#0f1115;
  --card:#1d2129;
  --soft:#9aa0aa;
  --border:#2f3750;
  --icon:#fff;
  --coin:#9b8cff;
  --sk-base:#1f2430;
  --sk-mid:#2a3140;
}}

body{
  background:var(--bg);
  margin:0;
  font-family:system-ui;
}

header{
  background:var(--card);
  padding:22px 16px 14px;
  text-align:center;
  position:sticky;
  top:0;
  z-index:10;
  border-bottom:1px solid var(--border);
}

.back-btn{
  position:absolute;
  left:16px;
  top:22px;
  border:1px solid var(--border);
  background:var(--bg);
  font-size:22px;
}

.coin-icon{ font-size:30px;color:var(--accent); }
.coin-count{ font-size:42px;font-weight:800;color:var(--coin); }
.coin-label{ font-size:12px;color:var(--soft);letter-spacing:2px; }

.tabs{
  display:flex;
  gap:10px;
  padding:10px;
}

.tab-btn{
  flex:1;
  padding:8px;
  border-radius:10px;
  border:1px solid var(--border);
  background:var(--card);
  font-size:13px;
}

.tab-btn.active{
  background:#22c55e;
  color:#fff;
  border-color:#22c55e;
}

.tab-btn.deduct.active{
  background:#ef4444;
  border-color:#ef4444;
}

main{
  padding:14px;
}

.history-item{
  background:var(--card);
  border-radius:14px;
  padding:12px 14px;
  border:1px solid var(--border);
  margin-bottom:10px;
}

.history-item small{
  color:var(--soft);
  font-size:11px;
}

.empty{
  text-align:center;
  color:var(--soft);
  font-size:13px;
  margin-top:40px;
}
</style>
</head>

<body>

<header>
  <button class="back-btn" onclick="history.back()">
    <i class="bi bi-arrow-left"></i>
  </button>
  <i class="bi bi-coin coin-icon"></i>
  <div class="coin-count" id="coinCount">0</div>
  <div class="coin-label">MY COINS</div>
</header>

<div class="tabs">
  <button class="tab-btn active" id="tabAdd">Added</button>
  <button class="tab-btn deduct" id="tabDeduct">Deducted</button>
</div>

<main id="history"></main>

<script>
const coinCountEl = document.getElementById("coinCount");
const historyBox = document.getElementById("history");
const tabAdd = document.getElementById("tabAdd");
const tabDeduct = document.getElementById("tabDeduct");

coinCountEl.innerText = localStorage.getItem("myCoins") || 0;

const historyData = JSON.parse(localStorage.getItem("coinHistory")) || [];

function render(type){
  historyBox.innerHTML = "";

  const filtered = historyData.filter(h =>
    type === "add" ? h.amount > 0 : h.amount < 0
  );

  if(filtered.length === 0){
    historyBox.innerHTML = `<div class="empty">No records found</div>`;
    return;
  }

  for(let i = filtered.length - 1; i >= 0; i--){
    const item = filtered[i];
    const isAdd = item.amount > 0;

    const div = document.createElement("div");
    div.className = "history-item";
    div.innerHTML = `
      <strong class="${isAdd ? 'text-success' : 'text-danger'}">
        ${isAdd ? '+' : ''}${item.amount} Coins
      </strong><br>
      <small>${item.source} â€¢ ${item.date}</small>
    `;
    historyBox.appendChild(div);
  }
}

tabAdd.onclick = ()=>{
  tabAdd.classList.add("active");
  tabDeduct.classList.remove("active");
  render("add");
};

tabDeduct.onclick = ()=>{
  tabDeduct.classList.add("active");
  tabAdd.classList.remove("active");
  render("deduct");
};

render("add");
</script>

</body>
</html>
