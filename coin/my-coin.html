<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>My Coins</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>

<style>
body{background:#f7f8fa}
.card{border-radius:16px}
</style>
</head>

<body>

<div id="app" class="container py-3">

  <div class="card text-center mb-3">
    <div class="card-body">
      <i class="bi bi-coin fs-1 text-warning"></i>
      <h1 class="fw-bold">{{ coins }}</h1>
      <small class="text-muted">MY COINS</small>
    </div>
  </div>

  <!-- Tabs -->
  <ul class="nav nav-pills mb-3">
    <li class="nav-item">
      <button class="nav-link" :class="{active:tab==='all'}" @click="tab='all'">All</button>
    </li>
    <li class="nav-item">
      <button class="nav-link" :class="{active:tab==='add'}" @click="tab='add'">Added</button>
    </li>
    <li class="nav-item">
      <button class="nav-link" :class="{active:tab==='deduct'}" @click="tab='deduct'">Deducted</button>
    </li>
  </ul>

  <!-- History -->
  <div v-if="filtered.length===0" class="text-center text-muted mt-4">
    No history available
  </div>

  <div v-for="h in filtered" class="card mb-2">
    <div class="card-body py-2">
      <strong :class="h.type==='add'?'text-success':'text-danger'">
        {{ h.type==='add' ? '+' : '-' }}{{ h.amount }} Coins
      </strong><br>
      <small class="text-muted">{{ h.source }} â€¢ {{ h.date }}</small>
    </div>
  </div>

</div>

<script>
Vue.createApp({
  data(){
    return{
      coins: Number(localStorage.getItem('myCoins')||0),
      history: JSON.parse(localStorage.getItem('coinHistory')||'[]').reverse(),
      tab:'all'
    }
  },
  computed:{
    filtered(){
      if(this.tab==='all') return this.history;
      return this.history.filter(h=>h.type===this.tab);
    }
  }
}).mount('#app')
</script>

</body>
</html>
