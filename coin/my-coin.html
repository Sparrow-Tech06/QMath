<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>My Coins</title>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<style>
 :root{
  --bg:#f7f8fa;
  --card:#ffffff;
  --soft:#9aa0aa;
  --accent:#ffd54f;
  --border:#e3e6ea;
  --icon: #000 ;
  --coin: #9b8cff;
  --sk-base: #e6e8eb;
  --sk-mid:  #f2f3f5;
  --sk-speed: 1.3s ;
}

 @media (prefers-color-scheme: dark) {
:root{
  --bg:#0f1115;
  --card:#1d2129;
  --soft:#9aa0aa;
  --accent:#ffd54f;
  --border:#2f3750;
  --icon: #fff;
  --coin: #9b8cff ;
  --sk-base: #1f2430;
  --sk-mid:  #2a3140;
}
 }

body{
  background:var(--bg);
  color:#fff;
  margin:0;
  font-family:system-ui;
}

/* Layout */
.page{
  min-height:100vh;
  display:flex;
  flex-direction:column;
}

/* Header */
header{
  background:var(--card);
  padding:24px 16px 18px;
  text-align:center;
  position:sticky;
  top:0;
  z-index:10;
  border-bottom:1px solid var(--border);
}

.back-btn{
  position:absolute;
  left:16px;
  top:22px;
  background: var(--bg) ;
  border:none;
  color: var(--icon) ;
  font-size:22px;
  border:1px solid var(--border);
}

.coin-icon{
  font-size:30px;
  color:var(--accent);
  filter:drop-shadow(0 0 6px rgba(255,213,79,.4));
}

.coin-count{
  font-size:44px;
  font-weight:800;
  color: var(--coin) ;
}

.coin-label{
  font-size:12px;
  letter-spacing:2px;
  color:var(--soft);
}

/* Main */
main{
  flex:1;
  padding:14px;
  overflow-y:auto;
}

/* History item */
.history-item{
  background:var(--card);
  border-radius:14px;
  padding:12px 14px;
  margin-bottom:10px;
  border:1px solid var(--border);
}

.history-item small{
  color:var(--soft);
  font-size:11px;
}

/* Skeleton */
.skeleton{
  background: linear-gradient( 90deg, var(--sk-base) 25%, var(--sk-mid) 37%, var(--sk-base) 63% );
  background-size: 400% 100%;
  animation: skeleton-loading var(--sk-speed) ease-in-out infinite;
  border-radius:14px;
  height:58px;
  margin-bottom:10px;
}

/* Animation */
@keyframes skeleton-loading{
  0%{
    background-position: 100% 0;
  }
  100%{
    background-position: 0 0;
  }
}

/* Empty */
.empty{
  text-align:center;
  color:var(--soft);
  font-size:13px;
  margin-top:40px;
}
</style>
</head>

<body>

<div class="page">

  <!-- Header -->
  <header>
    <button class="back-btn" onclick="window.history.back()">
      <i class="bi bi-arrow-left"></i>
    </button>

    <i class="bi bi-coin coin-icon"></i>
    <div class="coin-count" id="coinCount">0</div>
    <div class="coin-label">MY COINS</div>
    <a href="prize.html> My Prizes </a>
  </header>

  <!-- History -->
  <main id="history">
    <!-- Skeleton loader -->
    <div class="skeleton"></div>
    <div class="skeleton"></div>
    <div class="skeleton"></div>
  </main>

</div>

<script>
const coinCountEl = document.getElementById("coinCount");
const historyBox = document.getElementById("history");

coinCountEl.innerText = localStorage.getItem("myCoins") || 0;

// Skeleton delay
setTimeout(() => {

  const historyData = JSON.parse(localStorage.getItem("coinHistory")) || [];
  historyBox.innerHTML = "";

  if(historyData.length === 0){
    historyBox.innerHTML = `<div class="empty">No coin history available</div>`;
    return;
  }

  // ðŸ”¥ LATEST FIRST (guaranteed)
  for(let i = historyData.length - 1; i >= 0; i--){
    const item = historyData[i];

    const article = document.createElement("article");
    article.className = "history-item";
    article.innerHTML = `
      <strong class="text-success">+${item.amount} Coins</strong><br>
      <small>${item.source} â€¢ ${item.date}</small>
    `;
    historyBox.appendChild(article);
  }

}, 700);
</script>

</body>
</html>

